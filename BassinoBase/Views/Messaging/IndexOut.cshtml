@using Interfaz.Controllers
@using BassinoBase.Controllers
@using BassinoLibrary.Helpers
@using BassinoLibrary.Resource
@using Interfaz.Controllers
@using BassinoLibrary.ViewModels
@Helpers.BotonCreateUrl("Messaging/Create", "Nuevo Mensaje", false)

<script>

    $(document).ready(function() {
        $("#Buscar").keyup(function(e) {
            if (e.which == 13)
                RefrescarGrilla();
        });
        var message = "Bandeja de Salida <small>Panel de Control</small>";
        $("#titleUpdate").text("");
        $("#titleUpdate").append(message);
    });

    function RefrescarGrilla() {
        $(".k-grid").each(function() {
            $(this).data("kendoGrid").dataSource.page(1);
            $(this).data("kendoGrid").dataSource.read();
        });
    }


</script>
@(Html.KendoGrid().Grid<MessagingViewModel, MessagingController>()
    .Name("GridMessaging")
    .Columns(columns =>
    {
        columns.Bound(p => p.Subject);
        columns.Template(@<text></text>).HtmlAttributes(new { @class = "acciones" }).Width(300).ClientTemplate(@Html.Partial("_GridAcctionsOut").ToString())
              .HtmlAttributes(new { @style = "overflow: visible;" });

	    })
	.DataSource(dataSource => dataSource
        .Ajax()
        .Model(conf => conf.Id(model => model.Id))
        .PageSize(10)
            .Read(read => read.Action("GridInfoSendItems", "Messaging"))
    )
)
