@using BassinoLibrary.Helpers
@using BassinoLibrary.Resource
@using Domain.Misc
@using Domain.Providers
@model BassinoLibrary.ViewModels.ProductViewModel

@{
    Layout = "~/Views/Shared/_ModalLayout.cshtml";
    ViewBag.Action = "DeleteImages";
}

@section Header
{
    @Helpers.ModalHeader(string.Format("{0} {1}", "Eliminar","Imagenes al Producto"))
}

<script>

   function DeleteImagen(id) {
        var productoId=$("#productoId").val();
        $.ajax({
            type: "POST",
            url: "/Product/DeleteImg",
            datatype: "JSON",
            data: { id:id,productoId:productoId },
            success: function (data) {
                if (data.resultado) {
                    alertSuccessModal("Las imagenes se han eliminado correctamente");
                    $("#" + id + "").remove();

                } else {
                    alertSuccessModal("Ups :( algo salio mal");
                    

                }

            }
        });
        
    }
   
</script>

<fieldset>
    <div id="alertDivModalImagenes"></div>
   
    
    <div id="FormContent">
       
         <input type="hidden" name="productoId" id="productoId" value="@ViewBag.productoId">
         <div class="progress CustomProgress">
            <div id="FileProgress" class="progress-bar" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100" style="width: 0%;">
                <span></span>
            </div>
        </div>
        
            @{
                foreach (var Item in ViewBag.Imagenes)
                {
                    var filename = "400x400" + Item.FileName;
                    <div class="InfoContainer" id="@Item.Id">
                        
                        <div id="Imagecontainer">
                            <img src="/Content/Images/@filename" class="thumb" title="" />
                        </div>
                        <div id="FileName" class="info">
                            Nombre: @Item.FileName
                        </div>
                        <div id="FileType" class="info">
                            Tipo: @Item.FileType
                        </div>
                        <button class="btn btn-block btn-danger" onclick="DeleteImagen(@Item.Id);">Eliminar Imagen</button>
                    </div>
                }
            }

                   

    </div>
</fieldset>

<div id="createView">
</div>
<script>
    $(document).ready(function () {
     
    });
</script>
@section Footer
{
}
